<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Memorama Ingl√©s</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

    <style>
        body {
            background: #f5f5f5;
        }

        /* --- TARJETA --- */
        .card-tile {
            height: 80px !important;    /* tama√±o fijo */
            width: 100%;
            aspect-ratio: 1/1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;              /* ‚¨Ü icono m√°s grande */
            border-radius: 12px;
            cursor: pointer;
            transition: all .2s ease;
            background: #d8e2ff;          /* color boca abajo */
            border: 3px solid #0d6efd;
            color: #0d6efd;
        }

        .card-tile:hover {
            transform: scale(1.05);
            background: #bdd1ff;
        }

        /* Boca arriba */
        .revealed {
            background: white !important;
            color: #0d6efd !important;
            border-color: #0d6efd !important;
        }

        /* Match */
        .matched {
            background: #198754 !important;
            border-color: #198754 !important;
            color: white !important;
            cursor: default;
            transform: none !important;
        }
    </style>
</head>

<body>

<div class="container py-4">

    <h2 class="fw-bold text-center mb-4">
        üß† English Memory Game
    </h2>

    <!-- Nombres jugadores -->
    <div class="row mb-4">
        <div class="col-md-6">
            <input id="player1" class="form-control" placeholder="Player 1 name">
        </div>
        <div class="col-md-6">
            <input id="player2" class="form-control" placeholder="Player 2 name">
        </div>
    </div>

    <button class="btn btn-primary mb-4 w-100" onclick="startGame()">
        Start game
    </button>

    <!-- Turno -->
    <h4 id="turno" class="text-center fw-semibold mb-2"></h4>

    <!-- Marcador -->
    <div class="text-center mb-4">
        <span id="score1" class="badge bg-primary fs-5 me-2">0</span>
        <span id="score2" class="badge bg-success fs-5">0</span>
    </div>

    <!-- Tablero -->
    <div id="board" class="row g-3"></div>
</div>

<!-- Modal de preguntas -->
<div class="modal fade" id="questionModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title">Pregunta de Ingl√©s</h5>
            </div>

            <div class="modal-body">
                <p id="questionText" class="fw-semibold"></p>
                <div id="options" class="list-group"></div>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
    let icons = [
        "bi-alarm", "bi-battery-full", "bi-lightning", "bi-cloud",
        "bi-eye", "bi-moon", "bi-star", "bi-umbrella"
    ];

    let cards = [];
    let revealed = [];
    let lock = false;
    let turnoActual = 1;
    let score1 = 0;
    let score2 = 0;
    let currentMatch = null;

const preguntas = [
    { q: "Which WH-word is used to ask about a person?", opts: ["When", "Who", "Where"], correct: "Who" },
    { q: "Complete the question: '___ are you going?'", opts: ["What", "Where", "Why"], correct: "Where" },
    { q: "Which WH-word is used to ask for reasons?", opts: ["Who", "How", "Why"], correct: "Why" },
    { q: "Choose the correct question:", opts: ["Where you live?", "Where do you live?", "Do where you live?"], correct: "Where do you live?" },
    { q: "'How much' is used to ask about:", opts: ["People", "Quantity or price", "Time"], correct: "Quantity or price" },
    { q: "Complete the question: '___ time does the class start?'", opts: ["What", "When", "How"], correct: "What" },
    { q: "Which WH-word is used to ask about things?", opts: ["What", "Who", "Why"], correct: "What" },
    { q: "Choose the correctly formed question:", opts: ["Why you are sad?", "Are why you sad?", "Why are you sad?"], correct: "Why are you sad?" },
    { q: "'When' is used to ask about:", opts: ["Time", "Place", "Quantity"], correct: "Time" },
    { q: "Complete the question: '___ old are you?'", opts: ["What", "How", "Which"], correct: "How" },
    { q: "Which WH-word is used to ask about a place?", opts: ["When", "Where", "Who"], correct: "Where" },
    { q: "Choose the correct question:", opts: ["What does this mean?", "What mean this?", "What this means?"], correct: "What does this mean?" },
    { q: "'Which' is mainly used when:", opts: ["The options are limited", "Asking about time", "Asking for reasons"], correct: "The options are limited" },
    { q: "Complete the question: '___ do you study English?' (reason)", opts: ["Why", "When", "Which"], correct: "Why" },
    { q: "Which WH-word is used to ask about manner or way?", opts: ["How", "When", "Who"], correct: "How" },
    { q: "Identify the incorrect question:", opts: ["Who is calling?", "Where are they?", "What you are doing?"], correct: "What you are doing?" },
    { q: "Complete the question: '___ book is this?' (possession)", opts: ["Whose", "Where", "What"], correct: "Whose" },
    { q: "Which WH-word is used to ask about a specific person?", opts: ["Where", "Which", "Who"], correct: "Who" },
    { q: "Select the correct WH-word: '___ does it cost?'", opts: ["Who", "How much", "When"], correct: "How much" },
    { q: "Choose the correct structure for WH-questions:", opts: ["WH + do/does + subject + verb", "Subject + WH + verb", "Do + WH + verb + subject"], correct: "WH + do/does + subject + verb" }
];

    /* ------------------ INICIO ------------------ */
    function startGame() {
        const p1 = document.getElementById("player1").value.trim();
        const p2 = document.getElementById("player2").value.trim();

        if (!p1 || !p2) {
            alert("Escribe los dos nombres.");
            return;
        }

        turnoActual = 1;
        document.getElementById("turno").innerText = "Turn: " + p1;

        score1 = 0;
        score2 = 0;
        document.getElementById("score1").innerText = 0;
        document.getElementById("score2").innerText = 0;

        cards = [...icons, ...icons];
        cards.sort(() => Math.random() - 0.5);

        drawBoard();
    }

    /* ------------------ TABLERO ------------------ */
    function drawBoard() {
        const board = document.getElementById("board");
        board.innerHTML = "";

        cards.forEach((icon, idx) => {
            const col = document.createElement("div");
            col.className = "col-3";   /* 4 columnas */

            const card = document.createElement("div");
            card.className = "card-tile";
            card.dataset.index = idx;
            card.dataset.icon = icon;
            card.innerHTML = `<i class="bi bi-question-lg"></i>`;
            card.onclick = () => revealCard(card);

            col.appendChild(card);
            board.appendChild(col);
        });
    }

    /* ------------------ REVELAR CARTAS ------------------ */
    function revealCard(card) {
        if (lock) return;
        if (card.classList.contains("matched")) return;
        if (card.classList.contains("revealed")) return;

        card.classList.add("revealed");
        card.innerHTML = `<i class="bi ${card.dataset.icon}"></i>`;
        revealed.push(card);

        if (revealed.length === 2) {
            lock = true;

            if (revealed[0].dataset.icon === revealed[1].dataset.icon) {
                currentMatch = revealed[0].dataset.icon;

                askQuestion(); // SOLO da puntos si responde bien
            } else {
                setTimeout(() => {
                    revealed.forEach(c => {
                        c.classList.remove("revealed");
                        c.innerHTML = `<i class="bi bi-question-lg"></i>`;
                    });
                    revealed = [];
                    lock = false;
                    cambiarTurno();
                }, 800);
            }
        }
    }

    /* ------------------ PREGUNTA ------------------ */
    function askQuestion() {
        const p = preguntas[Math.floor(Math.random() * preguntas.length)];

        document.getElementById("questionText").innerText = p.q;

        const optionsDiv = document.getElementById("options");
        optionsDiv.innerHTML = "";

        p.opts.forEach(opt => {
            const btn = document.createElement("button");
            btn.className = "list-group-item list-group-item-action";
            btn.innerText = opt;

            btn.onclick = () => {

                if (opt === p.correct) {
                    // ‚úî Respuesta correcta ‚Üí ahora s√≠ se agrega punto
                    revealed.forEach(c => c.classList.add("matched"));

                    if (turnoActual === 1) {
                        score1++;
                        document.getElementById("score1").innerText = score1;
                    } else {
                        score2++;
                        document.getElementById("score2").innerText = score2;
                    }

                    revealed = [];
                    lock = false;

                } else {
                    // ‚ùå Incorrecta ‚Üí NO suma punto, NO se queda la pareja
                    revealed.forEach(c => {
                        c.classList.remove("revealed");
                        c.innerHTML = `<i class="bi bi-question-lg"></i>`;
                    });

                    revealed = [];
                    lock = false;
                    cambiarTurno();
                }

                modal.hide();
            };

            optionsDiv.appendChild(btn);
        });

        modal.show();
    }

    /* ------------------ CAMBIO DE TURNO ------------------ */
    function cambiarTurno() {
        turnoActual = turnoActual === 1 ? 2 : 1;

        const p1 = document.getElementById("player1").value;
        const p2 = document.getElementById("player2").value;

        document.getElementById("turno").innerText =
            turnoActual === 1 ? "Turno de " + p1 : "Turno de " + p2;
    }

    const modal = new bootstrap.Modal(document.getElementById('questionModal'));
</script>

</body>
</html>